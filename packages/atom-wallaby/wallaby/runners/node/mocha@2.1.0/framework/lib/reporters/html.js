/*
 * Wallaby.js - v1.0.279
 * http://wallabyjs.com
 * Copyright (c) 2014-2016 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
function HTML(e){Base.call(this,e);var t,i,n=this,s=this.stats,r=(e.total,fragment(statsTemplate)),a=r.getElementsByTagName("li"),o=a[1].getElementsByTagName("em")[0],l=a[1].getElementsByTagName("a")[0],u=a[2].getElementsByTagName("em")[0],c=a[2].getElementsByTagName("a")[0],h=a[3].getElementsByTagName("em")[0],d=r.getElementsByTagName("canvas")[0],f=fragment('<ul id="mocha-report"></ul>'),_=[f],v=document.getElementById("mocha");if(d.getContext){var p=window.devicePixelRatio||1;d.style.width=d.width,d.style.height=d.height,d.width*=p,d.height*=p,i=d.getContext("2d"),i.scale(p,p),t=new Progress}return v?(on(l,"click",function(){unhide();var e=/pass/.test(f.className)?"":" pass";f.className=f.className.replace(/fail|pass/g,"")+e,f.className.trim()&&hideSuitesWithout("test pass")}),on(c,"click",function(){unhide();var e=/fail/.test(f.className)?"":" fail";f.className=f.className.replace(/fail|pass/g,"")+e,f.className.trim()&&hideSuitesWithout("test fail")}),v.appendChild(r),v.appendChild(f),t&&t.size(40),e.on("suite",function(e){if(!e.root){var t=n.suiteURL(e),i=fragment('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,escape(e.title));_[0].appendChild(i),_.unshift(document.createElement("ul")),i.appendChild(_[0])}}),e.on("suite end",function(e){e.root||_.shift()}),e.on("fail",function(t,i){"hook"==t.type&&e.emit("test end",t)}),void e.on("test end",function(e){var r=s.tests/this.total*100|0;t&&t.update(r).draw(i);var a=new Date-s.start;if(text(o,s.passes),text(u,s.failures),text(h,(a/1e3).toFixed(2)),"passed"==e.state)var l=n.testURL(e),c=fragment('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="%s" class="replay">‣</a></h2></li>',e.speed,e.title,e.duration,l);else if(e.pending)var c=fragment('<li class="test pass pending"><h2>%e</h2></li>',e.title);else{var c=fragment('<li class="test fail"><h2>%e <a href="%e" class="replay">‣</a></h2></li>',e.title,n.testURL(e)),d=e.err.stack||e.err.toString();~d.indexOf(e.err.message)||(d=e.err.message+"\n"+d),"[object Error]"==d&&(d=e.err.message),!e.err.stack&&e.err.sourceURL&&void 0!==e.err.line&&(d+="\n("+e.err.sourceURL+":"+e.err.line+")"),c.appendChild(fragment('<pre class="error">%e</pre>',d))}if(!e.pending){var f=c.getElementsByTagName("h2")[0];on(f,"click",function(){v.style.display="none"==v.style.display?"block":"none"});var v=fragment("<pre><code>%e</code></pre>",utils.clean(e.fn.toString()));c.appendChild(v),v.style.display="none"}_[0]&&_[0].appendChild(c)})):error("#mocha div missing, add it to your document")}function error(e){document.body.appendChild(fragment('<div id="mocha-error">%s</div>',e))}function fragment(e){var t=arguments,i=document.createElement("div"),n=1;return i.innerHTML=e.replace(/%([se])/g,function(e,i){switch(i){case"s":return String(t[n++]);case"e":return escape(t[n++])}}),i.firstChild}function hideSuitesWithout(e){for(var t=document.getElementsByClassName("suite"),i=0;i<t.length;i++){var n=t[i].getElementsByClassName(e);0==n.length&&(t[i].className+=" hidden")}}function unhide(){for(var e=document.getElementsByClassName("suite hidden"),t=0;t<e.length;++t)e[t].className=e[t].className.replace("suite hidden","suite")}function text(e,t){e.textContent?e.textContent=t:e.innerText=t}function on(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)}var Base=require("./base"),utils=require("../utils"),Progress=require("../browser/progress"),escape=utils.escape,Date=global.Date,setTimeout=global.setTimeout,setInterval=global.setInterval,clearTimeout=global.clearTimeout,clearInterval=global.clearInterval;exports=module.exports=HTML;var statsTemplate='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>',makeUrl=function(e){var t=window.location.search;return window.location.pathname+(t?t+"&":"?")+"grep="+encodeURIComponent(e)};HTML.prototype.suiteURL=function(e){return makeUrl(e.fullTitle())},HTML.prototype.testURL=function(e){return makeUrl(e.fullTitle())};