/*
 * Wallaby.js - v1.0.279
 * http://wallabyjs.com
 * Copyright (c) 2014-2016 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
var JsDiff=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function t(e){for(var t=[],i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t}function i(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}var n=function(e){this.ignoreWhitespace=e};n.prototype={diff:function(t,i){if(i===t)return[{value:i}];if(!i)return[{value:t,removed:!0}];if(!t)return[{value:i,added:!0}];i=this.tokenize(i),t=this.tokenize(t);var n=i.length,s=t.length,r=n+s,a=[{newPos:-1,components:[]}],o=this.extractCommon(a[0],i,t,0);if(a[0].newPos+1>=n&&o+1>=s)return a[0].components;for(var l=1;r>=l;l++)for(var u=-1*l;l>=u;u+=2){var c,h=a[u-1],d=a[u+1];o=(d?d.newPos:0)-u,h&&(a[u-1]=void 0);var f=h&&h.newPos+1<n,_=d&&o>=0&&s>o;if(f||_){!f||_&&h.newPos<d.newPos?(c=e(d),this.pushComponent(c.components,t[o],void 0,!0)):(c=e(h),c.newPos++,this.pushComponent(c.components,i[c.newPos],!0,void 0));var o=this.extractCommon(c,i,t,u);if(c.newPos+1>=n&&o+1>=s)return c.components;a[u]=c}else a[u]=void 0}},pushComponent:function(e,t,i,n){var s=e[e.length-1];s&&s.added===i&&s.removed===n?e[e.length-1]={value:this.join(s.value,t),added:i,removed:n}:e.push({value:t,added:i,removed:n})},extractCommon:function(e,t,i,n){for(var s=t.length,r=i.length,a=e.newPos,o=a-n;s>a+1&&r>o+1&&this.equals(t[a+1],i[o+1]);)a++,o++,this.pushComponent(e.components,t[a],void 0,void 0);return e.newPos=a,o},equals:function(e,t){var i=/\S/;return!this.ignoreWhitespace||i.test(e)||i.test(t)?e===t:!0},join:function(e,t){return e+t},tokenize:function(e){return e}};var s=new n,r=new n(!0),a=new n;r.tokenize=a.tokenize=function(e){return t(e.split(/(\s+|\b)/))};var o=new n(!0);o.tokenize=function(e){return t(e.split(/([{}:;,]|\s+)/))};var l=new n;return l.tokenize=function(e){for(var t=[],i=e.split(/^/m),n=0;n<i.length;n++){var s=i[n],r=i[n-1];"\n"==s&&r&&"\r"===r[r.length-1]?t[t.length-1]+="\n":s&&t.push(s)}return t},{Diff:n,diffChars:function(e,t){return s.diff(e,t)},diffWords:function(e,t){return r.diff(e,t)},diffWordsWithSpace:function(e,t){return a.diff(e,t)},diffLines:function(e,t){return l.diff(e,t)},diffCss:function(e,t){return o.diff(e,t)},createPatch:function(e,t,i,n,s){function r(e){return e.map(function(e){return" "+e})}function a(e,t,i){var n=u[u.length-2],s=t===u.length-2,r=t===u.length-3&&(i.added!==n.added||i.removed!==n.removed);/\n$/.test(i.value)||!s&&!r||e.push("\\ No newline at end of file")}var o=[];o.push("Index: "+e),o.push("==================================================================="),o.push("--- "+e+("undefined"==typeof n?"":"	"+n)),o.push("+++ "+e+("undefined"==typeof s?"":"	"+s));var u=l.diff(t,i);u[u.length-1].value||u.pop(),u.push({value:"",lines:[]});for(var c=0,h=0,d=[],f=1,_=1,v=0;v<u.length;v++){var p=u[v],g=p.lines||p.value.replace(/\n$/,"").split("\n");if(p.lines=g,p.added||p.removed){if(!c){var m=u[v-1];c=f,h=_,m&&(d=r(m.lines.slice(-4)),c-=d.length,h-=d.length)}d.push.apply(d,g.map(function(e){return(p.added?"+":"-")+e})),a(d,v,p),p.added?_+=g.length:f+=g.length}else{if(c)if(g.length<=8&&v<u.length-2)d.push.apply(d,r(g));else{var y=Math.min(g.length,4);o.push("@@ -"+c+","+(f-c+y)+" +"+h+","+(_-h+y)+" @@"),o.push.apply(o,d),o.push.apply(o,r(g.slice(0,y))),g.length<=4&&a(o,v,p),c=0,h=0,d=[]}f+=g.length,_+=g.length}}return o.join("\n")+"\n"},applyPatch:function(e,t){for(var i=t.split("\n"),n=[],s=!1,r=!1,a="I"===i[0][0]?4:0;a<i.length;a++)if("@"===i[a][0]){var o=i[a].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);n.unshift({start:o[3],oldlength:o[2],oldlines:[],newlength:o[4],newlines:[]})}else"+"===i[a][0]?n[0].newlines.push(i[a].substr(1)):"-"===i[a][0]?n[0].oldlines.push(i[a].substr(1)):" "===i[a][0]?(n[0].newlines.push(i[a].substr(1)),n[0].oldlines.push(i[a].substr(1))):"\\"===i[a][0]&&("+"===i[a-1][0]?s=!0:"-"===i[a-1][0]&&(r=!0));for(var l=e.split("\n"),a=n.length-1;a>=0;a--){for(var u=n[a],c=0;c<u.oldlength;c++)if(l[u.start-1+c]!==u.oldlines[c])return!1;Array.prototype.splice.apply(l,[u.start-1,+u.oldlength].concat(u.newlines))}if(s)for(;!l[l.length-1];)l.pop();else r&&l.push("");return l.join("\n")},convertChangesToXML:function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n];s.added?t.push("<ins>"):s.removed&&t.push("<del>"),t.push(i(s.value)),s.added?t.push("</ins>"):s.removed&&t.push("</del>")}return t.join("")},convertChangesToDMP:function(e){for(var t,i=[],n=0;n<e.length;n++)t=e[n],i.push([t.added?1:t.removed?-1:0,t.value]);return i}}}();"undefined"!=typeof module&&(module.exports=JsDiff);