/*
 * Wallaby.js - v1.0.279
 * http://wallabyjs.com
 * Copyright (c) 2014-2016 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
!function(e){e.addEventListener&&e.addEventListener("beforeunload",function(){throw new Error("One of your tests is trying to unload window object.")});var t,i=/%[sdj%]/g,n=16384;"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(e){var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n?this:e||{},t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype||{},s.prototype=new n,s});var s=function(){var t=this;t._noOp=function(){},t._undefined=e.undefined,t._setTimeout=e.setTimeout,t._Date=e.Date,t._Error=e.Error,t._JSONStringify=JSON.stringify,t._XMLHttpRequest=e.XMLHttpRequest,t._replacedConsoleLog=e.console.log=function(){t._suppressConsoleLog||t._doWhenReceiverIsReady(function(e){t._log.apply(t,e)},arguments)},e.console.warn=function(){t._doWhenReceiverIsReady(function(e){t._warn.apply(t,e)},arguments)},e.console.error=function(){t._doWhenReceiverIsReady(function(e){t._error.apply(t,e)},arguments)},e.console.dir=function(){t._doWhenReceiverIsReady(function(e){t._dir.apply(t,e)},arguments)},t._receiver=e.$_$receiver||new e.WebSocket("ws://127.0.0.1:"+e.$_$receiverPort),t._onReceiverReady=[function(){t._receiverReady=!0}],t._receiver.onopen=function(){for(var e=0,i=t._onReceiverReady.length;i>e;e++)t._onReceiverReady[e]()},t._receiver.onerror=function(e){throw new Error("Sandbox receiver error: "+e.message)},t.reset()};s.prototype={setGlobalErrorHandler:function(){var t=this;e.$_$reuseableTracer||(e.onerror=function(){t._globalError.apply(t,arguments)})},_globalError:function(){var e=this;e._doWhenReceiverIsReady(function(t){e._sendGlobalError.apply(e,t)},arguments)},initialSpecId:function(){return e.$_$initialSpecId},start:function(t){var i=this;if(t||!(i._delayStart||i._startRequested&&!e.$_$reuseableTracer))if(i.reset(),t)this._onStart=t,this._patchFrameworks();else{if(!this._onStart)throw new Error("Missing tracer start subscription");i._startRequested=!0,this._receiverReady?this._onStart():this._onReceiverReady.push(this._onStart)}},isInitialized:function(){return!!e.$_$coverage},statement:function(i,n){e.$_$coverage[i][n][this._spec]=t++},scopeStart:function(e){this._fileEncounter[e]||(this._fileEncounterSequence.push(e),this._fileEncounter[e]=1)},programScopeStartLoading:function(e){this._testFileIds[e]&&this._resetFileData(),this.scopeStart(e)},programScopeEndLoading:function(e){this._testFileIds[e]&&(this._saveCurrentTestLoadingSequence(),this._resetFileData())},_saveCurrentTestLoadingSequence:function(){this._fileEncounterSequence.length&&this._testLoadingSequence.push(this._fileEncounterSequence.slice())},started:function(t){t=t||{},t.loadingSequence=this._testLoadingSequence.slice(),this._resetLoadingData(),this._resetFileData(),e.$_$wp=this._original_$_$wp,e.$_$wpe=this._original_$_$wpe,this._send("started",t)},specStart:function(e,t){var i=this;this._doWhenReceiverIsReady(function(){i._send("preTest","string"==typeof t?t:i._format(t))}),this._spec=e,this._resetFileData()},specSyncStart:function(){this._specRangeStart=t},specSyncEnd:function(){this._specRangeEnd=t-1},specEnd:function(){this._spec=0;var e=this._specRangeStart,i=this._specRangeEnd;return this._specRangeStart=0,this._specRangeEnd=0,[e,i||t]},needToNotifySingleTestRun:function(){if(this._paused||this._onResumed||!this.hasSpecFilter()||e.$_$reuseableTracer)return!1;for(var t=e.$_$tests;"*"!==t;){var i=Object.keys(t);if(1!=i.length)return!1;t=t[i[0]]}return!0},notifySingleTestAfterEach:function(t){return this._paused||this._onResumed||e.$_$reuseableTracer?void t():(this._paused=!0,this._onResumed=t,void this._send("resume"))},resume:function(){this._paused&&(this._paused=!1,this._onResumed&&(this._onResumed(),delete this._onResumed))},paused:function(){return this._paused},hasSpecFilter:function(){return!!e.$_$tests&&"*"!==e.$_$tests},specFilter:function(t){var i=e.$_$tests[":?"];if(i&&i[":"+t[t.length-1]])return!0;for(var n=e.$_$tests,s=0,r=t.length;r>s;s++){var a=t[s];if(n=n[":"+a],!n)return!1;if("*"===n)return!0}return!1},complete:function(t){if(e.$_$coverage){for(var i=0,n=e.$_$coverage.length;n>i;i++){var s=e.$_$coverage[i];s&&s.length&&this._send("coverage",{id:i,ranges:s})}this._send("complete",t),e.$_$reuseableTracer||this._receiver.close()}},result:function(e){e.files=this._fileEncounterSequence,this._send("test",e)},_patchFrameworks:function(){var t=this;if(!t._patchedFrameworks){t._patchedFrameworks=!0;var i=e.requirejs&&"function"==typeof e.requirejs.load,n=e.System&&e.System.transpiler;if(t._shouldReportProgramScope=t._shouldReportProgramScope||i||n,i){var s=e.requirejs.load;e.requirejs.load=function(e,i,n){return s.call(this,e,i,t._urlWithFileData(n))}}if(n){var r=e.System.fetch;e.System.fetch=function(){var e=arguments[0]&&arguments[0].address;return e&&(arguments[0].address=t._urlWithFileData(e)),r.apply(this,arguments)}}if(t._XMLHttpRequest){var a=t._XMLHttpRequest.prototype.open;t._XMLHttpRequest.prototype.open=function(e,i){arguments[1]=t._urlWithFileData(i),a.apply(this,arguments)}}t._Error&&!t._Error.captureStackTrace&&e.navigator&&e.navigator.userAgent&&/PhantomJS\/2/.test(e.navigator.userAgent)&&(t._Error.captureStackTrace=function(){})}},_urlWithFileData:function(e){var t=this;if(e&&~e.indexOf("wallabyFileId"))return e;for(var i=[],n=e.replace(/\\/g,"/").split("/"),s=0;s<n.length;s++)"."!==n[s]&&(".."===n[s]&&i.length&&".."!==i[i.length-1]?i.pop():i.push(n[s]));return e=i.join("/"),e=t._appendFileData(e)},_appendFileData:function(t){var i=this,n="/"===t.charAt(0)?t.substr(1):t,s=e.location&&e.location.host&&t.indexOf(e.location.host);s>=0&&(n=n.substr(s+e.location.host.length+1));var r=t.lastIndexOf("?");r>=0&&(n=n.substring(0,r));var a=n&&i._getFileMetadata(n);return a?t+(~r?"&":"?")+a.ts+"&wallabyFileId="+a.id:t},_getFileMetadata:function(t){return e.$_$files[t]||e.$_$files[t.split("\\").join("/")]},_doWhenReceiverIsReady:function(e,t){var i=this;i._receiverReady?e(t):i._onReceiverReady.push(function(){e(t)})},_log:function(){this._sendLog("log",this._format.apply(this,arguments))},_warn:function(){this._sendLog("warn",this._format.apply(this,arguments))},_error:function(){this._sendLog("error",this._format.apply(this,arguments))},_dir:function(e){this._sendLog("dir",this._inspect(e))},_debugLog:function(){this._sendLog("debugLog",this._format.apply(this,arguments))},_sendGlobalError:function(e,t,i){e=e&&e.toString()||"",t=t&&t.toString()||"",i=i&&i.toString()||"",this._send("globalError",{message:e,stack:e+"\nat "+t+":"+i})},debugLog:function(){var e=this;e._doWhenReceiverIsReady(function(t){e._debugLog.apply(e,t)},arguments)},log:function(){var t=this;if(t._replacedConsoleLog!==e.console.log){for(var i=[],n=arguments.length-2,s=0;n>s;s++)i.push(arguments[s]);t._suppressConsoleLog=!0,e.console.log.apply(console,i),t._suppressConsoleLog=!1}t._doWhenReceiverIsReady(function(e){for(var i=[],n=e.length-2,s=0;n>s;s++)i.push(e[s]);t._sendLog("log",t._format.apply(t,i)||"",e[n],e[n+1])},arguments)},setAssertionData:function(e,t){try{var i=Object.prototype.toString.call(e.actual);e.showDiff===!0&&i==Object.prototype.toString.call(e.expected)&&void 0!==e.expected&&"[object Boolean]"!==i&&"[object Number]"!==i&&"[object Function]"!==i&&("string"!=typeof e.actual&&(e.actual=this._inspect(e.actual,5),e.expected=this._inspect(e.expected,5)),t.actual=e.actual,t.expected=e.expected),"UnexpectedError"===e.name&&e.getErrorMessage&&(t.formattedDiff=e.getErrorMessage("ansi").toString())}catch(n){}return t},_sendLog:function(e,t,i,s){var r=t?t.length:0;t&&r>n&&(t=t.slice(0,4096)+"...\n(truncated, total length: "+r+")"),this._send("console",{type:e,text:t||"",spec:this._spec,file:i,range:s})},_send:function(t,i){var n=this._JSONStringify({type:t,data:i,session:e.$_$session});this._receiver.send(n)},_resetLoadingData:function(){this._testLoadingSequence=this._safeObject([])},_resetFileData:function(){this._fileEncounterSequence=this._safeObject([]),this._fileEncounter=this._safeObject([])},reset:function(){var e=this;t=1,e._spec=0,e._specRangeStart=0,e._specRangeEnd=0,e._resetFileData()},_safeObject:function(e){return e.toJSON=this._undefined,e},_format:function(e){var t;if("string"!=typeof e){var n=[];for(t=0;t<arguments.length;t++)n.push(this._inspect(arguments[t]));return n.join(" ")}t=1;for(var s=arguments,r=s.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(t>=r)return e;switch(e){case"%s":return String(s[t++]);case"%d":return Number(s[t++]);case"%j":return JSON.stringify(s[t++]);default:return e}}),o=s[t];r>t;o=s[++t])a+=null===o||"object"!=typeof o?" "+o:" "+this._inspect(o);return a},_inspect:function(e,t){var i={seen:[],showHidden:!1,depth:t||2,stylize:function(e){return e}};return this._formatValue(i,e,i.depth)},_formatValue:function(e,t,i){var n=this,s=this._formatPrimitive(e,t);if(s)return s;var r=Object.keys(t),a=this._arrayToHash(r);if(e.showHidden&&(r=Object.getOwnPropertyNames(t)),0===r.length){if("function"==typeof t){var o=t.name?": "+t.name:"";return e.stylize("[Function"+o+"]","special")}if(this._isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(this._isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(this._isError(t))return this._formatError(t)}var l="",u=!1,c=["{","}"];if(this._isArray(t)&&(u=!0,c=["[","]"]),"function"==typeof t){var h=t.name?": "+t.name:"";l=" [Function"+h+"]"}if(this._isRegExp(t)&&(l=" "+RegExp.prototype.toString.call(t)),this._isDate(t)&&(l=" "+Date.prototype.toUTCString.call(t)),this._isError(t)&&(l=" "+this._formatError(t)),0===r.length&&(!u||0==t.length))return c[0]+l+c[1];if(0>i)return this._isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var d;return d=u?this._formatArray(e,t,i,a,r):r.map(function(s){return n._formatProperty(e,t,i,a,s,u)}),e.seen.pop(),this._reduceToSingleString(d,l,c)},_isArray:function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===this._objectToString(e)},_isRegExp:function(e){return"object"==typeof e&&"[object RegExp]"===this._objectToString(e)},_isDate:function(e){return"object"==typeof e&&"[object Date]"===this._objectToString(e)},_isError:function(e){return"object"==typeof e&&("[object Error]"===this._objectToString(e)||e instanceof Error)},_objectToString:function(e){return Object.prototype.toString.call(e)},_reduceToSingleString:function(e,t,i){var n=0,s=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.length+1},0);return s>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]},_formatPrimitive:function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string");case"number":return e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean")}return null===t?e.stylize("null","null"):void 0},_formatError:function(e){return"["+Error.prototype.toString.call(e)+"]"},_formatArray:function(e,t,i,n,s){for(var r=this,a=[],o=0,l=t.length;l>o;++o)this._hasOwnProperty(t,String(o))?a.push(this._formatProperty(e,t,i,n,String(o),!0)):a.push("");return s.forEach(function(s){s.match(/^\d+$/)||a.push(r._formatProperty(e,t,i,n,s,!0))}),a},_formatProperty:function(e,t,i,n,s,r){var a,o,l;if(l=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},l.get?o=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(o=e.stylize("[Setter]","special")),this._hasOwnProperty(n,s)||(a="["+s+"]"),o||(e.seen.indexOf(l.value)<0?(o=null===i?this._formatValue(e,l.value,null):this._formatValue(e,l.value,i-1),o.indexOf("\n")>-1&&(o=r?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=e.stylize("[Circular]","special")),"undefined"==typeof a){if(r&&s.match(/^\d+$/))return o;a=JSON.stringify(""+s),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o},_arrayToHash:function(e){var t={};return e.forEach(function(e){t[e]=!0}),t},_hasOwnProperty:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},initLoadingPhase:function(){var t=this;this._resetLoadingData(),delete this._loadingSequence,this._testFileIds=this._safeObject({}),(e.$_$testFiles||[]).forEach(function(e){t._testFileIds[e.id]=1}),t._original_$_$wp=e.$_$wp,t._original_$_$wpe=e.$_$wpe,e.$_$wp=function(e){t._reportProgramScope("programScopeStart",e),t.programScopeStartLoading(e)},e.$_$wpe=function(e){t._reportProgramScope("programScopeEnd",e),t.programScopeEndLoading(e)}},_reportProgramScope:function(e,t){var i=this;this._shouldReportProgramScope&&this._doWhenReceiverIsReady(function(){i._send(e,t)})}};var r=new s;r.setGlobalErrorHandler(),e.$_$w=function(e,t){r.statement(e,t)},e.$_$wp=function(e){r._reportProgramScope("programScopeStart",e),r.scopeStart(e)},e.$_$wpe=function(e){r._reportProgramScope("programScopeEnd",e)},e.$_$wf=function(e){r.scopeStart(e)},e.$_$tracer=r,e.$_$coverage=e.$_$coverage||[];var a=function(e){return e.path},o=function(e){return e?e.replace(/\\/g,"/"):e},l=e.$_$testFiles&&(e.$_$testFiles||[]).map(a).map(o),u=e.$_$testFiles&&e.$_$testFiles.filter(function(e){return e.loaded}).map(a);r.initLoadingPhase(),e.wallaby={delayStart:function(){r._patchFrameworks(),r._delayStart=!0},start:function(){r._delayStart=!1,r.start()},_startWhenReceiverIsReady:function(e){r._shouldReportProgramScope=!0,r._doWhenReceiverIsReady(function(){e()})},tests:l,loadedTests:u,baseDir:e.$_$baseDir,slowTestThreshold:e.$_$slow||75}}(function(){return this}()||global);